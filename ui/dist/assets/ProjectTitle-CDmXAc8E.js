import{r as l,h as o,i as $,a as g,c as z,b as G,g as F,d as U,u as V,k as W,e as H,f as q,j as e}from"./index-CxiSGgYB.js";/* empty css                      */import"./bootstrap.bundle.min-DBbfE-QU.js";import{S as K}from"./Sidebar-D-TkF408.js";import"./appStore-Dylo_vw9.js";/* empty css                  */const v={iframeOverlay:{position:"fixed",top:20,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:0},iframeContainer:{position:"relative",width:"80%",height:"80%",overflow:"hidden"},closeButton:{position:"absolute",top:"0px",right:"0px",backgroundColor:"transparent",border:"none",fontSize:"24px",borderRadius:"10px",fontWeight:"bold",color:"#000",cursor:"pointer",zIndex:1100},iframe:{position:"fixed",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",border:"none"},counter:{position:"absolute",top:"5px",left:"40%",backgroundColor:"transparent",border:"none",fontSize:"20px",fontWeight:"bold",color:"blue",cursor:"pointer",zIndex:1100}};var A={},y={};Object.defineProperty(y,"__esModule",{value:!0});y.parseLengthAndUnit=J;y.cssValue=X;var Q={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function J(t){if(typeof t=="number")return{value:t,unit:"px"};var s,r=(t.match(/^[0-9.]*/)||"").toString();r.includes(".")?s=parseFloat(r):s=parseInt(r,10);var a=(t.match(/[^0-9]*$/)||"").toString();return Q[a]?{value:s,unit:a}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(s,"px.")),{value:s,unit:"px"})}function X(t){var s=J(t);return"".concat(s.value).concat(s.unit)}var w={};Object.defineProperty(w,"__esModule",{value:!0});w.createAnimation=void 0;var Y=function(t,s,r){var a="react-spinners-".concat(t,"-").concat(r);if(typeof window>"u"||!window.document)return a;var n=document.createElement("style");document.head.appendChild(n);var c=n.sheet,u=`
    @keyframes `.concat(a,` {
      `).concat(s,`
    }
  `);return c&&c.insertRule(u,0),a};w.createAnimation=Y;var N=o&&o.__assign||function(){return N=Object.assign||function(t){for(var s,r=1,a=arguments.length;r<a;r++){s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},N.apply(this,arguments)},Z=o&&o.__createBinding||(Object.create?function(t,s,r,a){a===void 0&&(a=r);var n=Object.getOwnPropertyDescriptor(s,r);(!n||("get"in n?!s.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return s[r]}}),Object.defineProperty(t,a,n)}:function(t,s,r,a){a===void 0&&(a=r),t[a]=s[r]}),ee=o&&o.__setModuleDefault||(Object.create?function(t,s){Object.defineProperty(t,"default",{enumerable:!0,value:s})}:function(t,s){t.default=s}),te=o&&o.__importStar||function(t){if(t&&t.__esModule)return t;var s={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Z(s,t,r);return ee(s,t),s},se=o&&o.__rest||function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};Object.defineProperty(A,"__esModule",{value:!0});var ae=te(l),R=y,re=w,ne=(0,re.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function ie(t){var s=t.loading,r=s===void 0?!0:s,a=t.color,n=a===void 0?"#000000":a,c=t.speedMultiplier,u=c===void 0?1:c,j=t.cssOverride,d=j===void 0?{}:j,m=t.size,b=m===void 0?35:m,S=se(t,["loading","color","speedMultiplier","cssOverride","size"]),h=N({background:"transparent !important",width:(0,R.cssValue)(b),height:(0,R.cssValue)(b),borderRadius:"100%",border:"2px solid",borderTopColor:n,borderBottomColor:"transparent",borderLeftColor:n,borderRightColor:n,display:"inline-block",animation:"".concat(ne," ").concat(.75/u,"s 0s infinite linear"),animationFillMode:"both"},d);return r?ae.createElement("span",N({style:h},S)):null}var le=A.default=ie;function pe(){const t=$(),{item:s}=t.state,[r,a]=l.useState(!1),[n,c]=l.useState(!1),[u,j]=l.useState([]),[d,m]=l.useState(!1),[b,S]=l.useState(null),[h,oe]=l.useState(60),p=g(z),O=g(G);g(F);const P=g(U),C=V(),{isConnected:E,eventType:_,messages:T}=W(),D=H();l.useEffect(()=>{h>0&&d||h==0&&m(!1)},[h,d]),l.useEffect(()=>{(Date.now()>=P||!p||!O)&&(D(q()),C("/"))},[D,C,P,p,O]);const L=()=>{M()},k=async()=>{try{const i=`http://udise.pytosoft.com/v1/job_record/${s.id}/get_job_records`,x=await(await fetch(i,{method:"GET",headers:{Authorization:`Bearer ${p}`}})).json();j(Array.isArray(x)?x:[])}catch(i){console.error("Something went wrong",i)}},M=async()=>{a(!0);try{const i=`http://udise.pytosoft.com/v1/job/${s.id}/start`,f=await fetch(i,{method:"GET",headers:{Authorization:`Bearer ${p}`}});f.ok;const x=await f.json();S(x.vncPort)}catch(i){console.error("Something went wrong",i),a(!1)}},B=()=>m(!0),I=()=>m(!1);return l.useEffect(()=>{console.log(s),s.jobStatus=="PENDING"?a(!1):s.jobStatus=="IN_PROGRESS"&&(c(!0),a(!0))},[s]),l.useEffect(()=>{E&&(console.log(_),_=="JOB_STARTED"?B():_=="JOB_ENDED"&&I())},[T,E]),l.useEffect(()=>{k()},[s.id,p]),e.jsxs("div",{style:{display:"flex",minHeight:"100vh",backgroundColor:"#f0f0f0"},children:[e.jsx(K,{}),!d&&e.jsx("div",{className:"page-content mt-4",style:{flexGrow:1,paddingLeft:"20px"},children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"row mt-4 p-2",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between",children:[e.jsx("h4",{className:"mb-sm-0",children:"Projects"}),e.jsx("div",{className:"page-title-right",children:e.jsxs("ol",{className:"breadcrumb m-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",onClick:i=>{i.preventDefault()},children:"Projects"})}),e.jsx("li",{className:"breadcrumb-item",children:"Project List"}),e.jsx("li",{className:"breadcrumb-item active",children:"Project Details"})]})})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"card mt-n4 mx-n4",children:e.jsx("div",{className:"bg-soft-warning",children:e.jsxs("div",{className:"card-body pb-0 px-4",children:[e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"avatar-md",children:e.jsx("div",{className:"avatar-title bg-white rounded-circle",children:"SEL001"})}),e.jsxs("div",{className:"ms-3",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("h4",{className:"fw-bold",children:s.jobTitle}),!n&&e.jsxs("button",{id:"startJobButton",className:`btn btn-primary ${r?"disabled":""}`,onClick:L,disabled:r,children:[r?e.jsx("i",{className:"fas fa-spinner fa-spin"}):e.jsx("i",{className:"fas fa-play"}),d?"Job Started":r?"Wait...":"Start Job"]}),e.jsx(le,{loading:n,size:30,"aria-label":"Loading Spinner","data-testid":"loader"})]}),e.jsxs("div",{className:"hstack gap-3 flex-wrap",children:[e.jsxs("div",{children:["Start Date:"," ",e.jsx("span",{className:"fw-medium",children:"Sep 2, 2024"})]}),e.jsx("div",{className:"vr"}),e.jsxs("div",{children:["Due Date:"," ",e.jsx("span",{className:"fw-medium",children:"Sep 23, 2024"})]}),e.jsx("div",{className:"vr"}),e.jsx("div",{className:"badge rounded-pill bg-danger fs-12",children:"TAT: 12 hours"})]})]}),e.jsx("div",{className:"ms-auto",children:e.jsxs("div",{className:"hstack gap-1 flex-wrap",children:[e.jsx("button",{className:"btn py-0 fs-16 favourite-btn active shadow-none",children:e.jsx("i",{className:"ri-star-fill"})}),e.jsx("button",{className:"btn py-0 fs-16 text-body shadow-none",children:e.jsx("i",{className:"ri-share-line"})}),e.jsx("button",{className:"btn py-0 fs-16 text-body shadow-none",children:e.jsx("i",{className:"ri-flag-line"})})]})})]})})}),e.jsxs("ul",{className:"nav nav-tabs border-bottom-0",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link fw-semibold active",id:"project-overview-tab","data-bs-toggle":"tab",href:"#project-overview",role:"tab","aria-controls":"project-overview","aria-selected":"true",children:"Overview"})}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link fw-semibold",id:"project-document-tab","data-bs-toggle":"tab",href:"#project-document",role:"tab","aria-controls":"project-document","aria-selected":"false",children:"Job Records"})})]})]})})})})}),e.jsxs("div",{className:"row",children:[" ",e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"tab-content text-muted",children:[e.jsx("div",{id:"project-overview",className:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"project-overview-tab",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xl-12 col-lg-12",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"mb-3 fw-semibold text-uppercase",children:"Summary"}),e.jsx("div",{className:"pt-3 border-top border-top-dashed mt-4",children:e.jsx("div",{className:"row"})})]})})})})}),e.jsx("div",{id:"project-document",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"project-document-tab",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Job Records"}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-borderless align-middle mb-0 styled-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No."}),e.jsx("th",{children:"Student Name"}),e.jsx("th",{children:"Class"}),e.jsx("th",{children:"Section"}),e.jsx("th",{children:"Student Pen"}),e.jsx("th",{children:"Student Attendance"}),e.jsx("th",{children:"Student Percentage"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"no-result-cell",children:e.jsx("div",{className:"noresult",children:e.jsx("h4",{children:"No Record Found"})})})}),u.map((i,f)=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{children:f+1}),e.jsx("td",{children:i.studentName}),e.jsx("td",{children:i.className}),e.jsx("td",{children:i.section}),e.jsx("td",{children:i.studentPen}),e.jsx("td",{children:i.attendence}),e.jsx("td",{children:i.percentange}),e.jsx("td",{children:i.jobStatus})]},`${i.id}-${f}`))]})]})})]})})})]})})]})]})}),d&&e.jsx("div",{style:v.iframeOverlay,children:e.jsxs("div",{style:v.iframeContainer,children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("p",{style:v.counter,children:["login before ",h," sec"]}),";",e.jsx("button",{style:v.closeButton,onClick:I,children:"×"})]}),e.jsx("iframe",{src:`http://udise.pytosoft.com:${b}/?autoconnect=1&resize=scale&password=secret`,style:v.iframe,title:"Job Iframe"})]})})]})}export{pe as default};

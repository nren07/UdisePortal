import{r as c,j as e,L as j}from"./index-BKBUO6cJ.js";import{S as b}from"./Sidebar-DiWk_xQQ.js";import{a as o}from"./axios-B5lz35I2.js";import"./appStore-BiaLkqDN.js";/* empty css                  */const N=()=>{const[t,d]=c.useState([]),[n,r]=c.useState(null),m=async()=>{try{const s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mbyI6eyJlbWFpbCI6InBvcnRhbGFkbWluQGxtcy5jb20iLCJ1c2VySWQiOiI2NjY2Yjc3NjU3ZTM0YWIyYjAwZTRiN2UiLCJyb2xlIjoiUE9SVEFMX0FETUlOIn0sImV4cGlyZXNJbiI6IjFoIiwiaWF0IjoxNzI2MDM5MjU1fQ.J_S9Nl2Cyq2_Ql7kke53ZqfAHFUSEwKUF3F2sLbr7xQ",l={limit:10},a=await o.post("https://lmsapi.propdoors.com:3000/client/list",l,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}),{clients:i}=a.data;d(i)}catch(s){console.error("Error fetching client data",s)}};c.useEffect(()=>{m()},[]);const h=async()=>{try{await o.delete(`https://lmsapi.propdoors.com:3000/client/${n._id}`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mbyI6eyJlbWFpbCI6InBvcnRhbGFkbWluQGxtcy5jb20iLCJ1c2VySWQiOiI2NjY2Yjc3NjU3ZTM0YWIyYjAwZTRiN2UiLCJyb2xlIjoiUE9SVEFMX0FETUlOIn0sImV4cGlyZXNJbiI6IjFoIiwiaWF0IjoxNzI2MDM5MjU1fQ.J_S9Nl2Cyq2_Ql7kke53ZqfAHFUSEwKUF3F2sLbr7xQ"}}),d(t.filter(l=>l._id!==n._id)),r(null),document.getElementById("closeModalBtn").click()}catch(s){console.error("Error deleting client",s)}},x=s=>{r(s)};return e.jsx("div",{className:"page-content",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"card",id:"ClientList",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive table-card mb-1",children:e.jsxs("table",{className:"table align-middle",id:"ClientTable",children:[e.jsx("thead",{className:"table-light text-muted",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No"}),e.jsx("th",{children:"Client"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Projects"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{className:"list form-check-all",children:t.length>0?t.map((s,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:l+1}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.alternativeEmail||s.email}),e.jsx("td",{children:s.contactNumber}),e.jsx("td",{children:s.projects.map((a,i)=>e.jsx("span",{className:"badge badge-soft-primary text-black",children:a.projectName},i))}),e.jsx("td",{children:s.clientStatus?e.jsx("span",{className:"text-uppercase",children:"Active"}):e.jsx("span",{className:"text-uppercase text-yellow",children:"Disabled"})}),e.jsx("td",{children:e.jsxs("ul",{className:"list-inline hstack gap-2 mb-0",children:[e.jsx("li",{className:"list-inline-item edit","data-bs-toggle":"tooltip","data-bs-trigger":"hover","data-bs-placement":"top",title:"Edit",children:e.jsx("a",{href:"#showModal",className:"text-primary",children:e.jsx("i",{className:"ri-pencil-fill fs-16"})})}),e.jsx("li",{className:"list-inline-item","data-bs-toggle":"tooltip","data-bs-trigger":"hover","data-bs-placement":"top",title:"Remove",onClick:()=>x(s),children:e.jsx("a",{href:"#deleteRecordModal",className:"text-danger","data-bs-toggle":"modal",children:e.jsx("i",{className:"ri-delete-bin-5-fill fs-16"})})})]})})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No clients found."})})})]})}),e.jsx("div",{className:"modal fade zoomIn",id:"deleteRecordModal",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header",children:e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"closeModalBtn"})}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsx("h4",{children:"Are you sure?"}),e.jsx("p",{children:"Are you sure you want to remove this record?"}),e.jsxs("div",{className:"d-flex gap-2 justify-content-center mt-4 mb-2",children:[e.jsx("button",{type:"button",className:"btn btn-light","data-bs-dismiss":"modal",children:"Close"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:h,children:"Yes, Delete It!"})]})]})]})})})]})})})})})})},I=()=>e.jsxs("div",{className:"d-flex mt-3 mb-5",style:{display:"flex",minHeight:"100vh",backgroundColor:"#f3f6f9"},children:[e.jsx(b,{}),e.jsxs("div",{className:"page-content flex-grow-1 p-2 mt-5",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between",children:[e.jsx("h4",{className:"mb-sm-0",children:"Clients"}),e.jsx("div",{className:"page-title-right",children:e.jsxs("ol",{className:"breadcrumb m-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"javascript: void(0);",children:"Client"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Clients"})]})})]})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-lg-12",children:[e.jsxs("div",{id:"ClientList",className:"card",children:[e.jsx("div",{className:"card-header border-bottom-dashed",children:e.jsxs("div",{className:"row g-1 align-items-center",children:[e.jsx("div",{className:"col-sm",children:e.jsx("h5",{className:"card-title mb-0",children:"Client List"})}),e.jsx("div",{className:"col-sm-auto",children:e.jsx("div",{className:"d-flex flex-wrap align-items-start gap-2",children:e.jsx(j,{to:"/ClientAdd",children:e.jsxs("button",{type:"button",id:"create-btn",className:"btn btn-success add-btn","data-bs-target":"#addClient",children:[e.jsx("i",{className:"ri-add-line align-bottom me-1"})," ","Add Client"]})})})})]})}),e.jsx("div",{className:"card-body border-bottom-dashed border-bottom",children:e.jsx("form",{className:"ng-untouched ng-pristine ng-valid",children:e.jsx("div",{className:"row g-3",children:e.jsx("div",{className:"col-xl-6",children:e.jsxs("div",{className:"search-box ml-5  mb-5 ",children:[e.jsx("input",{type:"text",placeholder:"Search for Client, email, phone, status or something...",className:"form-control search"}),e.jsx("i",{className:"ri-search-line search-icon "})]})})})})})]}),e.jsx(N,{})]})})})]})]});export{I as default};

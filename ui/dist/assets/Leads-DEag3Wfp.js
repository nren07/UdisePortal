import{r as c,j as e,u as C}from"./index-_arHpulW.js";import{S as g}from"./Sidebar-ChugWKPT.js";import{a as y}from"./axios-B5lz35I2.js";import"./appStore-Ba7VXHeV.js";/* empty css                  */function I(){const[u,j]=c.useState([]),[h,a]=c.useState(0),[i,p]=c.useState(1),[d,v]=c.useState(10),[n,s]=c.useState([1,10]),l=i*d,r=l-d,m=Math.ceil(h/d),S=async()=>{try{const t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mbyI6eyJlbWFpbCI6InBvcnRhbGFkbWluQGxtcy5jb20iLCJ1c2VySWQiOiI2NjY2Yjc3NjU3ZTM0YWIyYjAwZTRiN2UiLCJyb2xlIjoiUE9SVEFMX0FETUlOIn0sImV4cGlyZXNJbiI6IjFoIiwiaWF0IjoxNzI3MTYwMTkyfQ.CP33z5fE1zhby72ylk6ti9ltkDuRYa2vU0B_lRUftdE";if(t){const o={limit:d,page:i},N=(await y.post("https://lmsapi.propdoors.com:3000/lead/list",o,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;j(N.leads),a(N.totalDocuments)}}catch(t){console.error("Something went wrong",t)}};c.useEffect(()=>{S()},[]);const b=t=>{t>=1&&t<=m&&(p(t),t>n[1]?s([n[0]+10,n[1]+10]):t<n[0]&&s([n[0]-10,n[1]-10]))},f=u.slice(r,l);return e.jsxs("div",{className:"container-fluid mb-5",children:[e.jsx("div",{className:"row",children:f==null?void 0:f.map((t,o)=>e.jsx("div",{className:"col-md-4 col-sm-12 mt-n2",children:e.jsxs("div",{className:"card mb-0 ribbon-box ribbon-fill ribbon-sm",children:[e.jsx("div",{className:"ribbon ribbon-info",children:"0"}),e.jsx("div",{className:"card-body",children:e.jsx("a",{"data-bs-toggle":"collapse",role:"button","aria-expanded":"false","aria-controls":`contactInitiated${o}`,className:"d-flex align-items-center",href:`#contactInitiated${o}`,children:e.jsxs("div",{className:"flex-grow-1 ms-5",children:[e.jsxs("h6",{className:"fs-14 mb-1",children:[t.name,e.jsx("div",{className:"status",style:{textAlign:"end",marginTop:"-18px"},children:e.jsx("span",{className:"badge badge-soft-success text-uppercase mt-3",children:t.status})})]}),e.jsxs("p",{className:"text-muted mb-0",children:[t.contactNumber,e.jsx("i",{className:"ri-eye-off-line me-4 align-bottom text-muted eye"})]})]})})}),e.jsxs("div",{className:"border-top border-top-dashed collapse",id:`contactInitiated${o}`,children:[e.jsx("div",{className:"card-body",children:e.jsx("form",{noValidate:!0,children:e.jsxs("ul",{className:"list-unstyled vstack gap-2 mb-0",children:[e.jsx("li",{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:`basiInput${o}`,className:"form-label",children:"Change Status"}),e.jsxs("select",{className:"form-select mb-3",children:[e.jsx("option",{defaultValue:!0,children:"Choose..."}),e.jsx("option",{value:"Verified",children:"Verified"}),e.jsx("option",{value:"Accepted",children:"Accepted"}),e.jsx("option",{value:"Site Visit",children:"Site Visit"}),e.jsx("option",{value:"Location Issue",children:"Location Issue"}),e.jsx("option",{value:"Budget Issue",children:"Budget Issue"}),e.jsx("option",{value:"Lost To Competitor",children:"Lost To Competitor"}),e.jsx("option",{value:"Not Connected",children:"Not Connected"}),e.jsx("option",{value:"Follow Up",children:"Follow Up"}),e.jsx("option",{value:"Other",children:"Other"})]})]})}),e.jsx("li",{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:`exampleFormControlTextarea${o}`,className:"form-label",children:"Remarks"}),e.jsx("textarea",{id:`exampleFormControlTextarea${o}`,rows:"3",className:"form-control"})]})})]})})}),e.jsxs("div",{className:"card-footer hstack gap-2",children:[e.jsx("button",{className:"btn btn-info btn-sm w-100",children:"Cancel"}),e.jsx("button",{className:"btn btn-success btn-sm w-100",children:"Save"})]})]})]})},o))}),e.jsxs("div",{className:"row g-0 text-center text-sm-start align-items-center mb-4",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("p",{className:"mb-sm-0 text-muted",children:["Showing"," ",e.jsx("span",{className:"fw-semibold",children:(i-1)*10+1})," to"," ",e.jsx("span",{className:"fw-semibold",children:Math.min(i*10,h)})," ","of"," ",e.jsx("span",{className:"fw-semibold text-decoration-underline",children:h})," ","entries"]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("ul",{className:"pagination pagination-separated justify-content-center justify-content-sm-end mb-sm-0",children:[e.jsx("li",{className:`page-item ${i===1?"disabled":""}`,children:e.jsx("button",{onClick:()=>b(i-1),className:"page-link",children:"Previous"})}),Array.from({length:Math.min(m,n[1]-n[0]+1)},(t,o)=>{const x=n[0]+o;return x>m?null:e.jsx("li",{className:`page-item ${x===i?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>b(x),children:x})},x)}),e.jsx("li",{className:`page-item ${i===m?"disabled":""}`,children:e.jsx("button",{onClick:()=>b(i+1),className:"page-link",children:"Next"})})]})})]})]})}function A(){const u=C(),[j,h]=c.useState([]);c.useState([]),c.useState(1),c.useState(0),c.useState([]);const[a,i]=c.useState({verifiedOn:"",clientStatus:[],projects:[]}),p=s=>{},d=()=>{const s=originalLeads.filter(l=>(a.verifiedOn?l.verifiedOn===a.verifiedOn:!0)&&(a.clientStatus.length?a.clientStatus.includes(l.clientStatus):!0)&&(a.projects.length?a.projects.includes(l.project):!0));h(s)},v=()=>{i({verifiedOn:"",clientStatus:[],projects:[]})},n=()=>{u("/CreateLeads")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-4 mb-5",style:{display:"flex",minHeight:"100vh",backgroundColor:"#f3f6f9"},children:[e.jsx(g,{}),e.jsxs("div",{className:"page-content mt-4 flex-grow-1 p-4",children:[e.jsx(g,{}),e.jsx("div",{className:"row ml-0",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between",children:[e.jsx("h4",{className:"mb-sm-0",children:"Leads"}),e.jsx("div",{className:"page-title-right",children:e.jsxs("ol",{className:"breadcrumb m-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",onClick:s=>s.preventDefault(),children:"Leads"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Leads List"})]})})]})})}),e.jsxs("div",{className:"container-fluid mt-4 ",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",className:"form-control search",placeholder:"Search for lead..."}),e.jsx("i",{className:"ri-search-line search-icon"})]})}),e.jsx("div",{className:"col-md-auto ms-auto",children:e.jsxs("div",{className:"d-flex hastck gap-2 flex-wrap me-4 mb-2",children:[e.jsxs("button",{type:"button",className:"btn btn-success",onClick:n,children:[e.jsx("i",{className:"ri-add-line"})," Create Lead"]}),e.jsxs("button",{type:"button",className:"btn btn-info","data-bs-toggle":"offcanvas",href:"#offcanvasExample",children:[e.jsx("i",{className:"ri-filter-3-line align-bottom me-1"})," ","Filters"]})]})})]})})}),e.jsxs("div",{className:"row",children:[e.jsx(I,{}),j.map((s,l)=>e.jsx("div",{className:"col-md-4 col-sm-12",children:e.jsxs("div",{className:"card mb-1 ribbon-box ribbon-fill ribbon-sm",children:[e.jsx("div",{className:"ribbon ribbon-info",children:s.viewCount}),e.jsx("div",{className:"card-body",children:e.jsx("a",{className:"d-flex align-items-center","data-bs-toggle":"collapse",href:`#contactInitiated${l}`,role:"button","aria-expanded":"false","aria-controls":`contactInitiated${l}`,children:e.jsxs("div",{className:"flex-grow-1 ms-3",children:[e.jsxs("h6",{className:"fs-14 mb-1",children:[s.name,e.jsx("div",{className:"status",style:{textAlign:"end",marginTop:"-18px"},children:e.jsx("span",{className:"badge badge-soft-success text-uppercase",children:s.clientStatus||s.status})})]}),e.jsxs("p",{className:"text-muted mb-0",children:[s.contactNumber," ",e.jsx("i",{className:`ri-eye-off-line me-2 align-bottom text-muted eye ${s.show?"d-none":""}`,onClick:()=>viewLead(s._id)})]}),e.jsx("p",{className:"text-muted mb-0",children:s.email})]})})}),e.jsxs("div",{className:"collapse border-top border-top-dashed",id:`contactInitiated${l}`,children:[e.jsxs("div",{className:"card-body",children:[s.clientActivities.map((r,m)=>e.jsxs("div",{children:[e.jsxs("h6",{className:"fs-14 mb-1",children:[r.name," ",e.jsx("small",{className:"badge badge-soft-danger",children:new Date(r.date).toLocaleDateString()})]}),e.jsxs("p",{className:"text-muted",children:[r.activity," ",e.jsx("br",{}),e.jsx("small",{children:r.remark})]})]},m)),e.jsx("form",{children:e.jsxs("ul",{className:"list-unstyled vstack gap-2 mb-0",children:[e.jsx("li",{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"basiInput",className:"form-label",children:"Change Status"}),e.jsxs("select",{className:"form-select mb-3",value:s.clientStatus,onChange:r=>{},children:[e.jsx("option",{value:"",children:"Choose..."}),e.jsx("option",{value:"Verified",disabled:s.clientStatus==="Accepted"||s.clientStatus==="Site Vist",children:"Verified"}),e.jsx("option",{value:"Accepted",disabled:s.clientStatus==="Site Vist",children:"Accepted"}),e.jsx("option",{value:"Site Vist",disabled:s.clientStatus==="Accepted",children:"Site Vist"}),e.jsx("option",{value:"Location Issue",disabled:s.clientStatus==="Accepted"||s.clientStatus==="Site Vist",children:"Location Issue"}),e.jsx("option",{value:"Budget Issue",disabled:s.clientStatus==="Accepted"||s.clientStatus==="Site Vist",children:"Budget Issue"}),e.jsx("option",{value:"Lost To Competitor",disabled:s.clientStatus==="Accepted"||s.clientStatus==="Site Vist",children:"Lost To Competitor"}),e.jsx("option",{value:"Not Connected",disabled:s.clientStatus==="Accepted"||s.clientStatus==="Site Vist",children:"Not Connected"}),e.jsx("option",{value:"Follow Up",disabled:s.clientStatus==="Accepted"||s.clientStatus==="Site Vist",children:"Follow Up"}),e.jsx("option",{value:"Other",disabled:s.clientStatus==="Accepted"||s.clientStatus==="Site Vist",children:"Other"})]})]})}),e.jsx("li",{children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"exampleFormControlTextarea5",className:"form-label",children:"Remarks"}),e.jsx("textarea",{className:"form-control",rows:"3"})]})})]})})]}),e.jsxs("div",{className:"card-footer hstack gap-2",children:[e.jsx("button",{className:"btn btn-info btn-sm w-100",children:"Cancel"}),e.jsx("button",{className:"btn btn-success btn-sm w-100",onClick:()=>p(s._id),children:"Save"})]})]})]})},s.id))]})]})]}),e.jsxs("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel",children:[e.jsxs("div",{className:"offcanvas-header",children:[e.jsx("h5",{id:"offcanvasExampleLabel",children:"Filters"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),e.jsx("div",{className:"offcanvas-body",children:e.jsxs("form",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"verifiedOn",className:"form-label",children:"Verified On"}),e.jsx("input",{type:"date",id:"verifiedOn",className:"form-control",value:a.verifiedOn,onChange:s=>i({...a,verifiedOn:s.target.value})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"clientStatus",className:"form-label",children:"Client Status"}),e.jsxs("select",{id:"clientStatus",className:"form-select",multiple:!0,value:a.clientStatus,onChange:s=>i({...a,clientStatus:Array.from(s.target.selectedOptions,l=>l.value)}),children:[e.jsx("option",{value:"Verified",children:"Verified"}),e.jsx("option",{value:"Accepted",children:"Accepted"}),e.jsx("option",{value:"Site Vist",children:"Site Vist"}),e.jsx("option",{value:"Location Issue",children:"Location Issue"}),e.jsx("option",{value:"Budget Issue",children:"Budget Issue"}),e.jsx("option",{value:"Lost To Competitor",children:"Lost To Competitor"}),e.jsx("option",{value:"Not Connected",children:"Not Connected"}),e.jsx("option",{value:"Follow Up",children:"Follow Up"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"projects",className:"form-label",children:"Projects"}),e.jsx("select",{id:"projects",className:"form-select",multiple:!0,value:a.projects,onChange:s=>i({...a,projects:Array.from(s.target.selectedOptions,l=>l.value)})})]}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,children:"Apply Filters"}),e.jsx("button",{type:"button",className:"btn btn-secondary ms-2",onClick:v,children:"Clear Filters"})]})})]})]})})}export{A as default};

import{r as i,a as l,e as f,b as j,c as h,d as p,u,f as N,j as e,L as x}from"./index-D0yGBgA7.js";import{S as v}from"./Sidebar-CbOHJQRg.js";/* empty css                  *//* empty css                      */import"./appStore-C6FmZP_N.js";function g(){const[s,a]=i.useState([]);l(f);const t=l(j),o=l(h),n=l(p),c=u();N(),i.useEffect(()=>{(Date.now()>=n||!o||!t)&&c("/")},[n,c]),i.useEffect(()=>{t??c("/")},[t,c]);const m=async()=>{try{const r=await fetch(`http://udise.pytosoft.com/v1/job/${t}/getJobs`,{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(!r.ok)throw new Error("Network response was not ok");const b=await r.json();a(b)}catch(r){console.error("Something went wrong",r)}};return i.useEffect(()=>{m()},[t,o]),e.jsx("div",{className:"row mb-5",children:s.map(r=>e.jsx(w,{item:r,navigate:c},r.id))})}const w=({item:s,navigate:a})=>e.jsx("div",{className:"col-xxl-3 col-sm-6 project-card",children:e.jsx("div",{className:"card",style:{cursor:"pointer"},tabIndex:"0",onClick:()=>a(`/ProjectTitle/${s.id}`,{state:{item:s}}),children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"p-3 bg-soft-project rounded-top",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"flex-grow-1",children:e.jsx("h5",{className:"mb-0 fs-14",children:e.jsx("a",{href:"#",className:"text-white",children:s.jobTitle})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(y,{item:s})})]})}),e.jsx(S,{item:s})]})})}),y=({item:s})=>e.jsxs("div",{className:"d-flex gap-1 align-items-center my-n2",children:[e.jsx("button",{type:"button",className:"btn avatar-xs p-0 favourite-btn shadow-none active",children:e.jsx("span",{className:"avatar-title bg-transparent fs-15",children:e.jsx("i",{className:"ri-star-fill"})})}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn btn-link text-muted p-1 mt-n1 py-0 text-decoration-none fs-15 shadow-none","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",children:e.jsx("i",{className:"icon-sm ri-list-check",style:{color:"white"}})}),e.jsx("div",{className:"dropdown-menu dropdown-menu-end",children:e.jsxs("a",{className:"dropdown-item",href:`/Projects/${s.id}`,children:[e.jsx("i",{className:"ri-eye-fill align-bottom me-2 text-muted"}),"View"]})})]})]}),S=({item:s})=>e.jsx("div",{className:"py-3",children:e.jsxs("div",{className:"row gy-3",children:[e.jsx(d,{label:"Status",value:s.jobStatus}),e.jsx(d,{label:"Uploaded On",value:new Date(s.uploadedOn).toLocaleDateString()}),e.jsx(d,{label:"File Name",value:s.fileName}),e.jsx(d,{label:"Job Type",value:s.jobType})]})}),d=({label:s,value:a})=>e.jsx("div",{className:"col-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-muted mb-1",children:s}),e.jsx("h5",{className:"fs-14",children:a})]})}),I=()=>{const[s,a]=i.useState(""),t=m=>a(m.target.value);l(j),l(h);const o=l(p),n=u(),c=N();return i.useEffect(()=>{Date.now()>=o&&n("/")},[o,c]),e.jsxs("div",{className:"d-flex mb-4",style:{backgroundColor:"#f3f6f9",minHeight:"100vh"},children:[e.jsx(v,{}),e.jsx("div",{className:"flex-grow-1 p-4 mt-4",children:e.jsx("div",{className:"page-content",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx(k,{}),e.jsx(T,{searchTerm:s,onSearchChange:t}),e.jsx(g,{})]})})})]})},k=()=>e.jsx("div",{className:"row mt-2 ml-0 p-3",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between",children:[e.jsx("h4",{className:"mb-sm-0",children:"Projects"}),e.jsx(P,{})]})})}),P=()=>e.jsx("div",{className:"page-title-right",children:e.jsxs("ol",{className:"breadcrumb m-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(x,{to:"#",children:"Projects"})}),e.jsx("li",{className:"breadcrumb-item",children:e.jsx(x,{to:"/app/projects",children:"Project List"})})]})}),T=({searchTerm:s,onSearchChange:a})=>e.jsx("div",{children:e.jsx("div",{className:"card mt-3",children:e.jsx("div",{className:"card-body",style:{backgroundColor:"white"},children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",className:"form-control search",placeholder:"Search for project...",value:s,onChange:a}),e.jsx("i",{className:"ri-search-line search-icon"})]})}),e.jsx("div",{className:"col-md-auto ms-auto",children:e.jsxs(x,{to:"/Upload",className:"btn btn-success mt-1 py-1",children:[e.jsx("i",{className:"ri-add-fill align-bottom me-1"})," Add Project"]})})]})})})});export{I as default};

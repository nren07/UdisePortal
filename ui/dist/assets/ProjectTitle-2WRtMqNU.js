import{g as J,r as t,a as n,c as I,b as P,e as T,d as C,u as R,h as A,j as e}from"./index-4C0lOHpC.js";/* empty css                      */import"./bootstrap.bundle.min-CvmiA3v1.js";import{S as B}from"./Sidebar-DADc8dji.js";import"./appStore-DMhuP0Cs.js";/* empty css                  */const d={iframeOverlay:{position:"fixed",top:20,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1050},iframeContainer:{position:"relative",width:"80%",height:"80%",overflow:"hidden"},closeButton:{position:"absolute",top:"0px",right:"0px",backgroundColor:"transparent",border:"none",fontSize:"24px",borderRadius:"10px",fontWeight:"bold",color:"#000",cursor:"pointer",zIndex:1100},iframe:{position:"fixed",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",border:"none"}};function F(){const u=J(),{item:a}=u.state,[i,N]=t.useState(a.jobStatus!="PENDING"),[m,g]=t.useState([]),[o,x]=t.useState(!1),[j,w]=t.useState(null),l=n(I),y=n(P);n(T);const b=n(C),p=R(),{isConnected:f,messages:r}=A();console.log(j),console.log(o),t.useEffect(()=>{(Date.now()>=b||!l||!y)&&p("/")},[b,p]);const S=()=>{D()},k=async()=>{try{const s=`https://udise.pytosoft.com/v1/job_record/${a.id}/get_job_records`,c=await(await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${l}`}})).json();g(Array.isArray(c)?c:[])}catch(s){console.error("Something went wrong",s)}},D=async()=>{try{const s=`http://udise.pytosoft.com/v1/job/${a.id}/start`,c=await(await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${l}`}})).json();N(!0),w(c.vncPort)}catch(s){console.error("Something went wrong",s)}},E=()=>x(!0),v=()=>x(!1);return t.useEffect(()=>{f&&(console.log(r),r=="JOB_STARTED"?E():r=="JOB_ENDED"&&v())},[r,f]),t.useEffect(()=>{k()},[a.id,l]),e.jsxs("div",{style:{display:"flex",minHeight:"100vh",backgroundColor:"#f0f0f0"},children:[e.jsx(B,{}),!o&&e.jsx("div",{className:"page-content mt-4",style:{flexGrow:1,paddingLeft:"20px"},children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"row mt-4 p-2",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between",children:[e.jsx("h4",{className:"mb-sm-0",children:"Projects"}),e.jsx("div",{className:"page-title-right",children:e.jsxs("ol",{className:"breadcrumb m-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"#",onClick:s=>{s.preventDefault()},children:"Projects"})}),e.jsx("li",{className:"breadcrumb-item",children:"Project List"}),e.jsx("li",{className:"breadcrumb-item active",children:"Project Details"})]})})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"card mt-n4 mx-n4",children:e.jsx("div",{className:"bg-soft-warning",children:e.jsxs("div",{className:"card-body pb-0 px-4",children:[e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"avatar-md",children:e.jsx("div",{className:"avatar-title bg-white rounded-circle",children:"SEL001"})}),e.jsxs("div",{className:"ms-3",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("h4",{className:"fw-bold",children:a.jobTitle}),e.jsxs("button",{id:"startJobButton",className:`btn btn-primary ${i?"disabled":""}`,onClick:S,disabled:i,children:[i?e.jsx("i",{className:"fas fa-spinner fa-spin"}):e.jsx("i",{className:"fas fa-play"}),i?"Job Started":"Start Job"]})]}),e.jsxs("div",{className:"hstack gap-3 flex-wrap",children:[e.jsxs("div",{children:["Start Date:"," ",e.jsx("span",{className:"fw-medium",children:"Sep 2, 2024"})]}),e.jsx("div",{className:"vr"}),e.jsxs("div",{children:["Due Date:"," ",e.jsx("span",{className:"fw-medium",children:"Sep 23, 2024"})]}),e.jsx("div",{className:"vr"}),e.jsx("div",{className:"badge rounded-pill bg-danger fs-12",children:"TAT: 12 hours"})]})]}),e.jsx("div",{className:"ms-auto",children:e.jsxs("div",{className:"hstack gap-1 flex-wrap",children:[e.jsx("button",{className:"btn py-0 fs-16 favourite-btn active shadow-none",children:e.jsx("i",{className:"ri-star-fill"})}),e.jsx("button",{className:"btn py-0 fs-16 text-body shadow-none",children:e.jsx("i",{className:"ri-share-line"})}),e.jsx("button",{className:"btn py-0 fs-16 text-body shadow-none",children:e.jsx("i",{className:"ri-flag-line"})})]})})]})})}),e.jsxs("ul",{className:"nav nav-tabs border-bottom-0",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link fw-semibold active",id:"project-overview-tab","data-bs-toggle":"tab",href:"#project-overview",role:"tab","aria-controls":"project-overview","aria-selected":"true",children:"Overview"})}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link fw-semibold",id:"project-document-tab","data-bs-toggle":"tab",href:"#project-document",role:"tab","aria-controls":"project-document","aria-selected":"false",children:"Job Records"})})]})]})})})})}),e.jsxs("div",{className:"row",children:[" ",e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"tab-content text-muted",children:[e.jsx("div",{id:"project-overview",className:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"project-overview-tab",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xl-12 col-lg-12",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"mb-3 fw-semibold text-uppercase",children:"Summary"}),e.jsx("div",{className:"pt-3 border-top border-top-dashed mt-4",children:e.jsx("div",{className:"row"})})]})})})})}),e.jsx("div",{id:"project-document",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"project-document-tab",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Job Records"}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-borderless align-middle mb-0 styled-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No."}),e.jsx("th",{children:"Student Name"}),e.jsx("th",{children:"Class"}),e.jsx("th",{children:"Section"}),e.jsx("th",{children:"Student Pen"}),e.jsx("th",{children:"Student Attendance"}),e.jsx("th",{children:"Student Percentage"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[m.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"no-result-cell",children:e.jsx("div",{className:"noresult",children:e.jsx("h4",{children:"No Record Found"})})})}),m.map((s,h)=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{children:h+1}),e.jsx("td",{children:s.studentName}),e.jsx("td",{children:s.className}),e.jsx("td",{children:s.section}),e.jsx("td",{children:s.studentPen}),e.jsx("td",{children:s.attendence}),e.jsx("td",{children:s.percentange}),e.jsx("td",{children:s.jobStatus})]},s.id))]})]})})]})})})]})})]})]})}),o&&e.jsx("div",{style:d.iframeOverlay,children:e.jsxs("div",{style:d.iframeContainer,children:[e.jsx("button",{style:d.closeButton,onClick:v,children:"Ã—"}),e.jsx("iframe",{src:`https://udise.pytosoft.com:${j}/?autoconnect=1&resize=scale&password=secret`,style:d.iframe,title:"Job Iframe"})]})})]})}export{F as default};

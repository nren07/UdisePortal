import{u as C,r as t,j as e}from"./index-CCDfDbQQ.js";import{S as F}from"./Sidebar-C5GqrRFZ.js";import{a as p}from"./axios-B5lz35I2.js";import"./appStore-C-JW8EAm.js";/* empty css                  */function A(){const j=C(),[l,r]=t.useState({name:"",email:"",contactNumber:"",budget:"",location:"",leadType:"",projects:[]}),[m,u]=t.useState(null),[c,n]=t.useState(!1),[h,i]=t.useState(""),[b,L]=t.useState([{_id:"1",projectName:"Project A"},{_id:"2",projectName:"Project B"}]),[x,T]=t.useState([{_id:"1",firstName:"Teller 1"},{_id:"2",firstName:"Teller 2"}]),o=a=>{const{name:s,value:d}=a.target;r({...l,[s]:d})},N=a=>{const{name:s,value:d}=a.target;r({...l,[s]:d})},g=a=>{u(a.target.files[0])},f=async()=>{n(!0),i("");const a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mbyI6eyJlbWFpbCI6ImNzcmF0aG9yZTYxN0BnbWFpbC5jb20iLCJ1c2VySWQiOiI2NmM5NzA4ODU5OWNlNTU1MTM0Y2M1ZTAifSwiZXhwaXJlc0luIjoiMWgiLCJpYXQiOjE3MjUwMTE0Mjl9.LcZbW2VE8EoKLIav4Z3mZjwLgAa93KERAbrQBORvRv8";try{const s=await p.post("https://lmsapi.propdoors.com:3000/lead",l,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});console.log("Lead created successfully:",s.data),alert("Lead created successfully!"),j("/leads")}catch(s){console.error("Error creating lead:",s),s.response&&s.response.data&&s.response.data.message?i(s.response.data.message):i("An error occurred while creating the lead. Please try again later.")}finally{n(!1)}},v=async()=>{if(!m){alert("Please select a file to upload");return}const a=new FormData;a.append("file",m),n(!0);try{console.log("Uploading file with data:",a);const s=await p.post("https://qa.propdoors.com:3000/batch-upload",a,{headers:{"Content-Type":"multipart/form-data"}});console.log("File uploaded successfully:",s.data),alert("File uploaded successfully!")}catch(s){console.error("Error uploading file:",s),alert("Error uploading file.")}finally{n(!1)}},y=()=>{r({projects:[],name:"",contactNumber:"",email:"",budget:"",assignTo:""})};return e.jsxs("div",{style:{display:"flex",minHeight:"100vh",backgroundColor:"#f0f0f0"},children:[e.jsx(F,{}),e.jsxs("div",{className:"page-content mt-5",style:{flexGrow:1,paddingLeft:"20px"},children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between",children:[e.jsx("h4",{className:"mb-sm-0",children:"Leads"}),e.jsx("div",{className:"page-title-right",children:e.jsxs("ol",{className:"breadcrumb m-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"javascript: void(0);",children:"Leads"})}),e.jsx("li",{className:"breadcrumb-item",children:"Leads List"}),e.jsx("li",{className:"breadcrumb-item active",children:"Create Lead"})]})})]})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xxl-12",children:e.jsxs("div",{className:"card mt-xxl-n5",children:[e.jsx("div",{className:"card-header",children:e.jsxs("ul",{className:"nav nav-tabs-custom rounded card-header-tabs border-bottom-0",role:"tablist",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:"nav-link active","data-bs-toggle":"tab",href:"#personalDetails",role:"tab",children:[e.jsx("i",{className:"fas fa-home"})," Create New Lead"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:"nav-link","data-bs-toggle":"tab",href:"#batchUpload",role:"tab",children:[e.jsx("i",{className:"far fa-user"})," Batch Upload"]})})]})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"tab-pane active",id:"personalDetails",role:"tabpanel",children:e.jsx("form",{children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-lg-4",children:[e.jsx("label",{htmlFor:"projects",className:"form-label",children:"Select Projects *"}),e.jsx("select",{id:"projects",name:"projects",className:"form-control form-control-sm",multiple:!0,value:l.projects,onChange:a=>r({...l,projects:Array.from(a.target.selectedOptions,s=>s.value)}),children:b.map(a=>e.jsx("option",{value:a._id,children:a.projectName},a._id))})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",className:"form-control",placeholder:"Enter name",value:l.name,onChange:o})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"Enter email",value:l.email,onChange:o})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("label",{htmlFor:"contactNumber",className:"form-label",children:"Contact Number *"}),e.jsx("input",{type:"text",id:"contactNumber",name:"contactNumber",className:"form-control",placeholder:"Enter contact number",value:l.contactNumber,onChange:o})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("label",{htmlFor:"budget",className:"form-label",children:"Budget"}),e.jsx("input",{type:"text",id:"budget",name:"budget",className:"form-control",placeholder:"Enter budget",value:l.budget,onChange:o})]}),e.jsxs("div",{className:"col-lg-4",children:[e.jsx("label",{htmlFor:"assignTo",className:"form-label",children:"Assign To *"}),e.jsx("select",{id:"assignTo",name:"assignTo",className:"form-control form-control-sm",value:l.assignTo,onChange:N,children:x.map(a=>e.jsx("option",{value:a._id,children:a.firstName},a._id))})]}),e.jsxs("div",{className:"col-lg-12",children:[e.jsxs("div",{className:"d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-light",onClick:y,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary ms-2",onClick:f,disabled:c,children:c?"Saving...":"Save"})]}),h&&e.jsx("div",{className:"text-danger mt-2",children:h})]})]})})}),e.jsx("div",{className:"tab-pane",id:"batchUpload",role:"tabpanel",children:e.jsx("form",{children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-lg-4",children:[e.jsx("label",{htmlFor:"file",className:"form-label",children:"Upload File *"}),e.jsx("input",{type:"file",id:"file",className:"form-control",onChange:g})]}),e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:v,disabled:c,children:c?"Uploading...":"Upload"})})})]})})})]})})]})})})})]})]})}export{A as default};
